# Questions Generated and Missing Functionality

## Actual Questions Being Generated

The questions come from the `ask_clarifying_question` tool call. The model generates them dynamically based on the vague request. Examples:

**For "make llm assessor":**
- Question: "What type of LLM assessor system do you want to create?"
- Options: 
  - A. Real-time evaluation system
  - B. Batch processing system  
  - C. Hybrid system
  - D. Custom solution

**For "create a payment system":**
- Question: "What type of payment system architecture do you need?"
- Options:
  - A. Microservices architecture
  - B. Monolithic architecture
  - C. Serverless architecture
  - D. Hybrid architecture

**For "build a chat app":**
- Question: "What type of chat application do you want to build?"
- Options:
  - A. Real-time messaging with WebSockets
  - B. REST API based chat
  - C. Serverless chat with functions
  - D. Peer-to-peer chat system

The actual question text and options are generated by the LLM in the `ask_clarifying_question` tool call arguments.

## Missing Functionality (Current vs Full Version)

### ✅ Currently Working
- Basic tool selection (9/9 tests passing)
- Question generation
- Diagram creation
- Codebase tool calls
- Basic selection context (just counts)

### ❌ Missing from Full Version

1. **Rich Selection Context**
   - Current: Just `"USER SELECTION: X nodes, Y edges selected"`
   - Full: Detailed node/edge labels, group information, selected item details
   - Impact: Can't see what's actually selected to make informed edits

2. **Full Graph State**
   - Current: Just `isEmpty`, `nodeCount`, `edgeCount`
   - Full: Complete graph JSON, all node/edge/group labels
   - Impact: Agent doesn't know what's already on canvas

3. **Unanswered Question Detection**
   - Current: Simplified check (only last message)
   - Full: Proper detection across entire conversation history
   - Impact: Might ask multiple questions or proceed when should wait

4. **Question Sequence Tracking**
   - Current: Not tracked
   - Full: Tracks question sequences, answers, prevents duplicate questions
   - Impact: Can't manage multi-turn question flows properly

5. **Rich Agent Context**
   - Current: Minimal context (4 fields)
   - Full: Comprehensive context with conversation summary, message history
   - Impact: Less informed decisions

6. **Error Recovery**
   - Current: Basic try/catch
   - Full: Progressive JSON parsing, multiple recovery attempts for malformed tool args
   - Impact: Tool calls might fail on parsing errors

7. **Multiple Tool Call Handling**
   - Current: Only handles first tool call
   - Full: Handles multiple tool calls via `toolCallsByIndex` Map
   - Impact: Might miss secondary tool calls

8. **Comprehensive Logging**
   - Current: Basic console.log
   - Full: Debug logs, agent logs, fetch-based logging to external service
   - Impact: Harder to debug production issues

9. **Selection-Based Editing Logic**
   - Current: No logic to detect edit intent from selection
   - Full: Detects when user wants to edit selected elements
   - Impact: Can't handle "add X to selected node" requests properly

10. **Image Processing**
    - Current: Basic image array handling
    - Full: Proper OpenAI image format conversion, image content processing
    - Impact: Images might not be properly sent to model

## Tool Call Examples

**Codebase Tool:**
```json
{
  "name": "codebase",
  "arguments": {
    "repo_url": "https://github.com/user/repo"
  }
}
```

**Create Diagram Tool:**
```json
{
  "name": "create_architecture_diagram",
  "arguments": {
    "requirements_summary": "REST API with Express, PostgreSQL, Redis",
    "architecture_type": "microservices"
  }
}
```

**Ask Question Tool:**
```json
{
  "name": "ask_clarifying_question",
  "arguments": {
    "question": "What type of LLM assessor system do you want to create?",
    "question_type": "radio",
    "options": [
      "Real-time evaluation system",
      "Batch processing system",
      "Hybrid system",
      "Custom solution"
    ]
  }
}
```



